<?xml version="1.0" encoding="UTF-8"?>
<configuration status="warn" monitorInterval="30">
    <appenders>
        <console name="Console" target="SYSTEM_OUT">
            <PatternLayout
                pattern="%d{yyyy-MM-dd HH:mm:ss:SSS} [%5p] [%t] - %l - %m%n" />
        </console>
        <RollingFile name="RollingFile"
            fileName="logs/gateway.log" append="true"
            filePattern="logs/$${date:yyyy-MM}/gateway-%d{yyyy-MM-dd}-%i.log">
            <PatternLayout
                pattern="%d{yyyy-MM-dd HH:mm:ss:SSS} [%5p] [%t] - %l - %m%n" />
            <Policies>
                <TimeBasedTriggeringPolicy />
                <SizeBasedTriggeringPolicy
                    size="100 MB" />
            </Policies>
            <DefaultRolloverStrategy max="20">
                <Delete basePath="logs" maxDepth="2">
                    <IfFileName glob="gateway*.log" />
                    <IfLastModified age="30d" />
                </Delete>
            </DefaultRolloverStrategy>  
        </RollingFile>
    </appenders>
    <loggers>
        <root level="WARN">
            <appender-ref ref="Console" />
            <appender-ref ref="RollingFile" />
        </root>
        <logger name="org.springframework" level="DEBUG" />
        <logger name="org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator" level="INFO" />
    </loggers>
</configuration>